import{u as $,c as B,a as n}from"./index.esm.01b07e70.js";import{g as G,u as w,a as q,Q as v,j as r,R as S,b as s,C as h,F as o,c as j,B as T}from"./index.a8a43b3b.js";const H=()=>{var m,p,x,b,g,F,C,E,D,N,y,U,f;const d=G(),{data:i}=w(`/user/list/${d==null?void 0:d.sub}`),{data:u}=w(`/school/list/${(m=i==null?void 0:i.Escola)==null?void 0:m.id}/trainingAreas`),e=$({initialValues:{nome:"",fotoUrl:"",descricao:"",areaDeFormacaoId:""},validationSchema:B({nome:n().required("Este campo \xE9 obrigat\xF3rio"),fotoUrl:n().required("Este campo  \xE9 obrigat\xF3rio"),descricao:n().required("Este campo \xE9 obrigat\xF3rio"),areaDeFormacaoId:n().required("Este campo \xE9 obrigat\xF3rio")}),onSubmit:async a=>{var l,I;try{const t=new FormData;t.append("file",a==null?void 0:a.fotoUrl[0]);const c=await L(t);c&&(a={...a,fotoUrl:c==null?void 0:c.id},await q.post("/course/post",a)&&(v.success("Curso cadastrado com sucesso"),e.resetForm()))}catch(t){v.error((I=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:I.message)}}});async function L(a){return(await q.post("/file",a)).data}return r(S,{children:s(h,{children:[r(h.Header,{className:"d-flex justify-content-between",children:r("div",{className:"header-title",children:r("h4",{className:"card-title",children:" Cadastrar Curso"})})}),r(h.Body,{children:s(o,{onSubmit:e.handleSubmit,encType:"multipart/form-data",children:[s(S,{children:[s(j,{md:"6",className:"mb-3",children:[r(o.Label,{htmlFor:"validationDefault04",children:"Area de Forma\xE7\xE3o"}),s(o.Select,{id:"areaDeFormacaoId",name:"areaDeFormacaoId",required:!0,onChange:e.handleChange,children:[r("option",{defaultChecked:!0,children:"Selecione um area de forma\xE7\xE3o"}),u==null?void 0:u.map(a=>r("option",{value:a==null?void 0:a.id,children:a==null?void 0:a.nome},a==null?void 0:a.id))]}),((p=e==null?void 0:e.touched)==null?void 0:p.areaDeFormacaoId)&&((x=e==null?void 0:e.errors)==null?void 0:x.areaDeFormacaoId)?r("label",{className:"mt-1 text-danger",children:(b=e==null?void 0:e.errors)==null?void 0:b.areaDeFormacaoId}):null,s(o.Group,{className:"mb-3 form-group mt-2",children:[r(o.Label,{htmlFor:"exampleFormControlTextarea1",children:"Descri\xE7\xE3o"}),r(o.Control,{as:"textarea",id:"descricao",value:e.values.descricao,name:"descricao",onChange:e.handleChange,rows:"5"}),((g=e==null?void 0:e.touched)==null?void 0:g.descricao)&&((F=e==null?void 0:e.errors)==null?void 0:F.descricao)?r("label",{className:"mt-1 text-danger",children:(C=e==null?void 0:e.errors)==null?void 0:C.descricao}):null]})]}),s(j,{md:"6",className:"mb-3",children:[r(o.Label,{md:"6",htmlFor:"validationDefault01",children:"Nome do Curso"}),r(o.Control,{type:"text",id:"nome",name:"nome",value:e.values.nome,onChange:e.handleChange,required:!0}),((E=e==null?void 0:e.touched)==null?void 0:E.nome)&&((D=e==null?void 0:e.errors)==null?void 0:D.nome)?r("label",{className:"mt-1 text-danger",children:(N=e==null?void 0:e.errors)==null?void 0:N.nome}):null,s(o.Group,{className:"mb-3 form-group mt-2",children:[r(o.Label,{className:"custom-file-input",children:"Carregar imagem"}),r(o.Control,{type:"file",id:"fotoUrl",name:"fotoUrl",onChange:a=>{var l;e.setFieldValue("fotoUrl",(l=a==null?void 0:a.currentTarget)==null?void 0:l.files)}}),((y=e==null?void 0:e.touched)==null?void 0:y.fotoUrl)&&((U=e==null?void 0:e.errors)==null?void 0:U.fotoUrl)?r("label",{className:"mt-1 text-danger",children:(f=e==null?void 0:e.errors)==null?void 0:f.fotoUrl}):null]})]})]}),r(o.Group,{children:r(T,{variant:"btn btn-primary",type:"submit",children:"Cadastrar"})})]})})]})})};export{H as default};
