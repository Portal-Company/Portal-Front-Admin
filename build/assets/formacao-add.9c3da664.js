import{g as S,u as A,a as w,Q as q,j as a,R as I,b as c,C as m,F as o,c as j,B}from"./index.3b1adc00.js";import{u as L,c as T,a as n}from"./index.esm.997dd77f.js";const G=()=>{var u,h,p,x,g,b,F,E,C,N,U,y;const d=S(),{data:s}=A(`/user/list/${d==null?void 0:d.sub}`),e=L({initialValues:{nome:"",fotoUrl:"",descricao:"",escolaId:(u=s==null?void 0:s.Escola)==null?void 0:u.id,categoriaId:(p=(h=s==null?void 0:s.Escola)==null?void 0:h.Categoria)==null?void 0:p.id},validationSchema:T({nome:n().required("Este campo \xE9 obrigat\xF3rio"),fotoUrl:n().required("Este campo  \xE9 obrigat\xF3rio"),descricao:n().required("Este campo \xE9 obrigat\xF3rio"),escolaId:n().required("Este campo \xE9 obrigat\xF3rio"),categoriaId:n().required("Este campo \xE9 obrigat\xF3rio")}),onSubmit:async r=>{var t,f;try{const l=new FormData;l.append("file",r==null?void 0:r.fotoUrl[0]);const i=await v(l);i&&(r={...r,fotoUrl:i==null?void 0:i.id},await w.post("/trainingArea/post",r)&&(q.success("Area de Forma\xE7\xE3o cadastrada com sucesso"),e.resetForm()))}catch(l){q.error((f=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:f.message)}}});async function v(r){return(await w.post("/file",r)).data}return a(I,{children:c(m,{children:[a(m.Header,{className:"d-flex justify-content-between",children:a("div",{className:"header-title",children:a("h4",{className:"card-title",children:"Cadastrar Area de Forma\xE7\xE3o"})})}),a(m.Body,{children:a(o,{onSubmit:e==null?void 0:e.handleSubmit,encType:"multipart/form-data",children:c(I,{className:"mb-3",children:[c(j,{md:"6",className:"mb-3",children:[a(o.Label,{htmlFor:"validationCustom05",children:"Nome"}),a(o.Control,{onChange:e.handleChange,name:"nome",value:e.values.nome,type:"text",id:"nome",required:!0}),((x=e==null?void 0:e.touched)==null?void 0:x.nome)&&((g=e==null?void 0:e.errors)==null?void 0:g.nome)?a("label",{className:"mt-1 text-danger",children:(b=e==null?void 0:e.errors)==null?void 0:b.nome}):null,c(o.Group,{className:"mb-3 form-group mt-2",children:[a(o.Label,{htmlFor:"exampleFormControlTextarea1",children:"Descri\xE7\xE3o"}),a(o.Control,{as:"textarea",id:"descricao",value:e.values.descricao,name:"descricao",onChange:e.handleChange,rows:"5"}),((F=e==null?void 0:e.touched)==null?void 0:F.descricao)&&((E=e==null?void 0:e.errors)==null?void 0:E.descricao)?a("label",{className:"mt-1 text-danger",children:(C=e==null?void 0:e.errors)==null?void 0:C.descricao}):null]})]}),a(j,{md:"6",className:"mb-3",children:c(o.Group,{className:"mb-3 form-group mt-2",children:[a(o.Label,{className:"custom-file-input",children:"Carregar imagem"}),a(o.Control,{type:"file",id:"fotoUrl",name:"fotoUrl",onChange:r=>{var t;e.setFieldValue("fotoUrl",(t=r==null?void 0:r.currentTarget)==null?void 0:t.files)}}),((N=e==null?void 0:e.touched)==null?void 0:N.fotoUrl)&&((U=e==null?void 0:e.errors)==null?void 0:U.fotoUrl)?a("label",{className:"mt-1 text-danger",children:(y=e==null?void 0:e.errors)==null?void 0:y.fotoUrl}):null]})}),a("div",{className:"col-12",children:a(B,{type:"submit",children:"Cadastrar"})})]})})})]})})};export{G as default};
